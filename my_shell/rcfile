#!/bin/bash
######################################################
# This rcfile and custom settings can be only used for
# ZSH or BASH
# Usage: In your ~/.bashrc or ~/.zshrc
#    source $MYRUNTIME/customs/my_shell/rcfile
#
######################################################
export MYRUNTIME=$(cat ~/.myruntime)

curshell() {
    #curshell=$(env | grep RBENV_SHELL)
    #curshell2=$(ps -cp $$ | awk 'NR==2{sub(/^-?/, "", $NF); print $NF}')
    #if [ "" = "$curshell" ]; then
    #    curshell=$(env | grep PYENV_SHELL)
    #    if [ "$curshell" = "PYENV_SHELL=bash" ]; then
    #        echo "bash"
    #    else
    #        if [ "$curshell2" = "zsh" ] || [ "$curshell2" = "bash" ]; then
    #            echo $curshell2
    #        else
    #            echo "Unknow"
    #        fi
    #    fi
    #elif [ "$curshell" = "RBENV_SHELL=bash" ]; then
    #    echo "bash"
    #elif [ "$curshell" = "RBENV_SHELL=zsh" ]; then
    #    echo "zsh"
    #else
    #    if [ "$curshell2" = "zsh" ] || [ "$curshell2" = "bash" ]; then
    #        echo $curshell2
    #    else
    #        echo "Unknow"
    #    fi
    #fi
    if [ -n "$ZSH_VERSION" ]; then
        echo "zsh"
    elif [ -n "$BASH_VERSION" ]; then
        echo "bash"
    elif [ -n "$FISH_VERSION" ]; then
        echo "fish"
    else
        echo "Unknow"
    fi
}

curterm() {
    TMPCURTERM=$(env | grep 'TERM_PROGRAM=' | sed 's/TERM_PROGRAM=//')
    CURTERM="Unknow"
    if [ "$TMPCURTERM" = "iTerm.app" ]; then
        CURTERM='iTerm'
    elif [ "$TMPCURTERM" = "Apple_Terminal" ]; then
        CURTERM='Terminal'
    fi
    echo $CURTERM
}

curPanel() {
  panel="shell"
  if [ ! -z "$STY" ]; then
    panel="screen"
  elif [ ! -z "$TMUX" ]; then
    panel="tmux"
  fi
  echo $panel;
}

export nowshell=$(curshell)
export nowterm=$(curterm)
export nowpanel=$(curPanel)
source $MYRUNTIME/customs/my_shell/${nowshell}/custom_shrc
