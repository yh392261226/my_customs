### Package Desc: è‡ªå®šä¹‰å·¥å…·ç›¸å…³å‘½ä»¤


function create_tmp_aliases() {                                                       # Desc: function: create_tmp_aliases:ä»¥a+æ•°å­—å½¢å¼åˆ›å»ºä¸´æ—¶åˆ«åå‘½ä»¤
    if [ "$#" -gt "0" ]; then
        tmp_command_file=$(mktemp)
        #åˆ›å»ºä¸´æ—¶è„šæœ¬
        n=1
        for tcommand in $argv; do
            echo "alias a${n}=\"${tcommand}\"\n" >> $tmp_command_file
            ((n=n+1))
        done
        if [ -f $tmp_command_file ]; then
            source $tmp_command_file
        fi
    else
        return
    fi
}
alias cta="create_tmp_aliases"                                                        # Desc: alias: cta:create_tmp_aliaseså‘½ä»¤çš„åˆ«å,ä»¥a+æ•°å­—å½¢å¼åˆ›å»ºä¸´æ—¶åˆ«åå‘½ä»¤

function temprature_monitor() {                                                       # Desc: function: temprature_monitor: æ¸©åº¦ç›‘æ§
    custom_gum_show2hide_header "æ¸©åº¦ç›‘æ§"
    while true; do
        
        # å…ˆå®‰è£…: brew install osx-cpu-temp
        if command -v osx-cpu-temp &>/dev/null; then
            temp=$(osx-cpu-temp | grep -oE '[0-9.]+')
            echo "CPU æ¸©åº¦: ${temp}Â°C"
        # é«˜æ¸©è­¦å‘Š
            if (( $(echo "$temp > 80" | bc -l) )); then
                echo "è­¦å‘Š: CPU æ¸©åº¦è¿‡é«˜!"
            fi
        else
            echo "è¯·å…ˆå®‰è£…: brew install osx-cpu-temp"
        fi
        sleep 20
    done
}
alias tm="temprature_monitor"                                                         # Desc: alias: tm: temprature_monitorå‘½ä»¤çš„åˆ«åï¼Œæ¸©åº¦ç›‘æ§

function net_port_monitor() {                                                         # Desc: function: net_port_monitor: ç½‘ç»œç«¯å£ç›‘æ§
    # ç›‘æ§ç‰¹å®šç«¯å£
    local text='è¯·è¾“å…¥è¦ç›‘æ§çš„ç«¯å£å· '
    $USE_GUM && port=$(gum input --placeholder "$text") || read -rep "$text" port </dev/tty

    # port=8080

    custom_gum_show2hide_header "ç½‘ç»œç«¯å£ç›‘æ§"
    while true; do
        if lsof -i :${port} >/dev/null; then
            echo "$(date) - ç«¯å£ $port æ­£åœ¨ç›‘å¬"
        else
            echo "$(date) - è­¦å‘Š: ç«¯å£ $port æœªç›‘å¬!"
        fi

        # ç›‘æ§ç½‘ç»œå“åº”
        if ping -c1 -t2 8.8.8.8 &>/dev/null; then
            echo "å¤–ç½‘è¿æ¥æ­£å¸¸"
        else
            echo "è­¦å‘Š: å¤–ç½‘è¿æ¥å¤±è´¥!"
        fi
        sleep 10
    done
}
alias mnp="net_port_monitor"                                                          # Desc: alias: mnp: net_port_monitorå‘½ä»¤çš„åˆ«åï¼Œç½‘ç»œç«¯å£ç›‘æ§

function disk_monitor() {                                                             # Desc: function: disk_monitor: ç¡¬ç›˜ç›‘æ§
    # æ£€æŸ¥æ ¹ç›®å½•ä½¿ç”¨ç‡
    custom_gum_show2hide_header "ç¡¬ç›˜ç›‘æ§"
    while true; do
        disk_usage=$(/bin/df -h / | tail -1 | awk '{print $5}' | tr -d '%')
        threshold=85

        if [[ "$disk_usage" -gt "$threshold" ]]; then
            echo "è­¦å‘Š: æ ¹ç›®å½•ä½¿ç”¨ç‡ ${disk_usage}% > ${threshold}%"
        else
            echo "ç£ç›˜æ­£å¸¸: ${disk_usage}%"
        fi
        sleep 60
    done
    # å¯é€‰ï¼šç›‘æ§ç‰¹å®šæŒ‚è½½ç‚¹
    # df -h /Volumes/YourDrive
}
alias dm="disk_monitor"                                                               # Desc: alias: dm: disk_monitorå‘½ä»¤çš„åˆ«åï¼Œç¡¬ç›˜ç›‘æ§

function real_time_cup_memory_monitor() {                                             # Desc: function: real_time_cup_memory_monitor: å®æ—¶ç›‘æ§CPUå’Œå†…å­˜
    # å…¼å®¹ bash å’Œ zsh
    custom_gum_show2hide_header "å®æ—¶ç›‘æ§CPUå’Œå†…å­˜"
    while true; do
        echo "===== $(date) ====="    
        # CPU ä½¿ç”¨ç‡ (macOS é€‚é…)
        cpu_usage=$(ps -A -o %cpu | awk '{s+=$1} END {printf "%.1f%%", s}')
        echo "CPU Usage: $cpu_usage"

        # å†…å­˜ä½¿ç”¨æƒ…å†µ (ä½¿ç”¨ vm_stat)
        total_mem=$(sysctl -n hw.memsize)
        page_size=$(vm_stat | grep 'page size' | awk '{print $8}')
        free_pages=$(vm_stat | grep 'Pages free' | awk '{print $3}' | sed 's/.//g')
        used_mem=$(( (total_mem - (free_pages * page_size)) / 1024 / 1024 ))
        total_mem=$(( total_mem / 1024 / 1024 ))
        echo "Memory: ${used_mem}MB / ${total_mem}MB"

        sleep 2
    done
}
alias rcmm="real_time_cup_memory_monitor"                                             # Desc: alias: rcmm: real_time_cup_memory_monitorå‘½ä»¤çš„åˆ«åï¼Œå®æ—¶ç›‘æ§CPUå’Œå†…å­˜

function fzf_monitor_manager() {                                                      # Desc: function: fzf_monitor_manager: åˆ©ç”¨fzfç®¡ç†ç›‘æ§å‘½ä»¤
    local options=(
        "å®æ—¶CPUå’Œå†…å­˜"
        "ç£ç›˜"
        "è¿›ç¨‹"
        "ç½‘ç»œ"
        "æ¸©åº¦"
        "ğŸ”™ è¿”å›"
    )
    
    custom_gum_show2hide_header "ç›‘æ§ç®¡ç†"
    while true; do
        local selection=$(printf '%s\n' "${options[@]}" | fzf \
            --height=30% \
            --reverse \
            --prompt="â¤ ç›‘æ§ > " \
            --preview-window="top:3:wrap"
        )
        
        case "$selection" in
            "å®æ—¶CPUå’Œå†…å­˜") real_time_cup_memory_monitor ;;
            "ç£ç›˜") disk_monitor ;;
            "è¿›ç¨‹") process_monitor ;;
            "ç½‘ç»œ") net_port_monitor ;;
            "æ¸©åº¦") temprature_monitor ;;
            "ğŸ”™ è¿”å›"|*)
                break
                ;;
        esac
    done
}
alias fmm="fzf_monitor_manager"                                                       # Desc: alias: fmm: fzf_monitor_managerå‘½ä»¤çš„åˆ«åï¼Œåˆ©ç”¨fzfç®¡ç†ç›‘æ§å‘½ä»¤

fzf_vedios_manager() {
    local options=(
        "è§†é¢‘åˆ—è¡¨"
        "å¸¸çœ‹è§†é¢‘ç½‘ç«™"
        "æ‰“å¼€ç›®å½•"
        "å¸¸ç”¨è½¯ä»¶"
        "ç»Ÿè®¡æ•°é‡åŠç£ç›˜å ç”¨é‡"
        "â†©ï¸ è¿”å›"
    )
    
    custom_gum_show2hide_header "è§†é¢‘ç®¡ç†"
    while true; do
        local selection=$(printf '%s\n' "${options[@]}" | fzf \
            --height=30% \
            --reverse \
            --prompt="â¤ è§†é¢‘ç®¡ç† > "
        )
        
        case $selection in
            *è§†é¢‘åˆ—è¡¨*) $MYRUNTIME/customs/bin/vedio choose "source" ;;
            *å¸¸çœ‹è§†é¢‘ç½‘ç«™*) $MYRUNTIME/customs/bin/vedio web "source" ;;
            *æ‰“å¼€ç›®å½•*) $MYRUNTIME/customs/bin/vedio directory "source" ;;
            *å¸¸ç”¨è½¯ä»¶*) $MYRUNTIME/customs/bin/vedio tools "source" ;;
            *ç»Ÿè®¡æ•°é‡åŠç£ç›˜å ç”¨é‡*) $MYRUNTIME/customs/bin/vedio statistics "source" ;;
            *è¿”å›*|*) break ;;
        esac
    done
}

fzf_novels_manager() {
    local options=(
        "å°è¯´é˜…è¯»åˆ—è¡¨"
        "å°è¯´ç½‘ç«™ç®¡ç†"
        "æ‰“å¼€å°è¯´æ–‡ä»¶å¤¹"
        "ç»Ÿè®¡æ•°é‡åŠç£ç›˜å ç”¨é‡"
        "â†©ï¸ è¿”å›"
    )
    
    custom_gum_show2hide_header "å°è¯´ç®¡ç†"
    while true; do
        local selection=$(printf '%s\n' "${options[@]}" | fzf \
            --height=30% \
            --reverse \
            --prompt="â¤ å°è¯´ç®¡ç† > "
        )
        
        case $selection in
            *å°è¯´é˜…è¯»åˆ—è¡¨*) 
                echo "è¯·æ‰‹åŠ¨æ‰§è¡Œ:"
                echo "novel choose" | pbcopy
                echo "novel choose"
                pbpaste
                #$MYRUNTIME/customs/bin/novel choose "source"
                echo ""
                #break 3
                #$MYRUNTIME/customs/bin/novel choose "source"
                return
                ;;
            *å°è¯´ç½‘ç«™ç®¡ç†*) $MYRUNTIME/customs/bin/novel web "source" ;;
            *æ‰“å¼€å°è¯´æ–‡ä»¶å¤¹*) $MYRUNTIME/customs/bin/novel directory "source" ;;
            *ç»Ÿè®¡æ•°é‡åŠç£ç›˜å ç”¨é‡*) $MYRUNTIME/customs/bin/novel statistics "source" ;;
            *è¿”å›*|*) break ;;
        esac
    done
}

fzf_recreation_manager() {
    local options=(
        "è§†é¢‘ç®¡ç†"
        "å°è¯´ç®¡ç†"
        "â†©ï¸ è¿”å›"
    )
    
    custom_gum_show2hide_header "å¨±ä¹ç®¡ç†"
    while true; do
        local selection=$(printf '%s\n' "${options[@]}" | fzf \
            --height=30% \
            --reverse \
            --prompt="â¤ å¨±ä¹ç®¡ç† > "
        )
        
        case $selection in
            *è§†é¢‘ç®¡ç†*) fzf_vedios_manager ;;
            *å°è¯´ç®¡ç†*) fzf_novels_manager ;;
            *è¿”å›*|*) break ;;
        esac
    done
}
