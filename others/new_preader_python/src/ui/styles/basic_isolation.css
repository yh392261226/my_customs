/*
基础样式隔离CSS
解决样式污染的核心规则
*/

/* ===== 基础隔离样式 ===== */

/* 隔离屏幕的基础重置 */
.isolated-screen {
    box-sizing: border-box;
    position: relative;
    width: 100%;
    height: 100%;
    
    /* 重置可能冲突的属性 */
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
    
    /* 确保正确的字体继承 */
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
    background: inherit;
    
    /* 清除浮动影响 */
    clear: both;
    
    /* 重置定位 */
    top: auto;
    left: auto;
    right: auto;
    bottom: auto;
    transform: none;
    z-index: auto;
}

/* 确保所有子元素使用正确的盒模型 */
.isolated-screen *,
.isolated-screen *::before,
.isolated-screen *::after {
    box-sizing: border-box;
}

/* ===== 屏幕特定样式 ===== */

/* 欢迎屏幕 */
.welcome-screen {
    /* 欢迎屏幕特定样式 */
}

.welcome-screen #welcome-container {
    width: 100%;
    height: 100%;
    align: center middle;
    content-align: center middle;
}

.welcome-screen #welcome-title {
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.welcome-screen #welcome-buttons {
    layout: horizontal;
    align: center middle;
    margin-bottom: 2;
}

.welcome-screen #welcome-buttons Button {
    margin: 0 1;
    min-width: 8;
}

/* 书架屏幕 */
.bookshelf-screen {
    /* 书架屏幕特定样式 */
}

.bookshelf-screen Grid {
    width: 100%;
    height: 100%;
}

.bookshelf-screen DataTable {
    width: 100%;
    height: 80;
}

.bookshelf-screen #bookshelf-toolbar Button {
    margin: 0 1;
    min-width: 8;
}

/* 阅读器屏幕 */
.reader-screen {
    /* 阅读器屏幕特定样式 */
}

.reader-screen #header {
    dock: top;
    height: 3;
    background: $accent;
    color: $text;
    text-align: center;
    content-align: center middle;
}

.reader-screen #content {
    width: 100%;
    height: 100%;
    margin: 1;
    padding: 1;
    border: round $primary;
    background: $surface;
    color: $text;
}

.reader-screen #buttons {
    dock: bottom;
    height: auto;
    min-height: 3;
    layout: horizontal;
    align: center middle;
    background: $panel;
}

.reader-screen #buttons Button {
    margin: 0 1;
    min-width: 8;
    background: $primary;
    color: $text;
}

/* 设置屏幕 */
.settings-screen {
    /* 设置屏幕特定样式 */
}

.settings-screen TabbedContent {
    width: 100%;
    height: 100%;
}

.settings-screen TabPane {
    width: 100%;
    height: 100%;
    padding: 1;
}

/* 文件资源管理器屏幕 */
.fileexplorer-screen {
    /* 文件资源管理器屏幕特定样式 */
}

.fileexplorer-screen DirectoryTree {
    width: 100%;
    height: 100%;
}

/* 统计屏幕 */
.statistics-screen {
    /* 统计屏幕特定样式 */
}

.statistics-screen .stats-container {
    width: 100%;
    height: 100%;
    padding: 1;
}

/* 帮助屏幕 */
.help-screen {
    /* 帮助屏幕特定样式 */
}

/* Boss Key屏幕 */
.bosskey-screen {
    /* Boss Key屏幕特定样式 */
}

/* 获取书籍屏幕 */
.getbooks-screen {
    /* 获取书籍屏幕特定样式 */
}

/* 代理列表屏幕 */
.proxylist-screen {
    /* 代理列表屏幕特定样式 */
}

/* 小说站点管理屏幕 */
.novelsites-screen {
    /* 小说站点管理屏幕特定样式 */
}

/* 爬虫管理屏幕 */
.crawler-screen {
    /* 爬虫管理屏幕特定样式 */
}

/* 书签屏幕 */
.bookmarks-screen {
    /* 书签屏幕特定样式 */
}

/* 搜索结果屏幕 */
.searchresults-screen {
    /* 搜索结果屏幕特定样式 */
}

/* ===== 防止样式泄漏的通用规则 ===== */

/* 重置可能冲突的全局样式 */
.isolated-screen {
    /* 确保屏幕独立性 */
    isolation: isolate;
    
    /* 重置变换 */
    transform: none;
    
    /* 重置溢出 */
    overflow: visible;
}

/* 屏幕切换过渡效果 */
.isolated-screen {
    transition: opacity 0.2s ease-in-out;
}

/* 确保活动屏幕正确显示 */
.isolated-screen.active {
    display: block;
    opacity: 1;
}

/* 隐藏非活动屏幕 */
.isolated-screen:not(.active) {
    display: none;
}

/* ===== 对话框样式重置 ===== */

Dialog {
    /* 确保对话框不受屏幕样式影响 */
    isolation: isolate;
    width: auto;
    height: auto;
    background: $panel;
    border: round $primary;
    padding: 1;
}

Dialog * {
    box-sizing: border-box;
}

/* ===== 响应式支持 ===== */

/* 小屏幕适配 */
@media (max-width: 80) {
    .isolated-screen .horizontal-layout {
        layout: vertical;
    }
    
    .isolated-screen Button {
        width: 100%;
        margin: 1 0;
    }
}