/*
样式隔离CSS文件
为每个屏幕提供命名空间隔离，防止样式污染
*/

/* ===== 基础样式重置 ===== */

/* 隔离屏幕的基础样式 */
.isolated-screen {
    box-sizing: border-box;
    position: relative;
    width: 100%;
    height: 100%;
    clear: both;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
    background: inherit;
}

/* 隔离容器的基础样式 */
.isolated-container {
    box-sizing: border-box;
    position: relative;
}

/* 确保所有子元素使用正确的盒模型 */
.isolated-screen *,
.isolated-screen *::before,
.isolated-screen *::after {
    box-sizing: border-box;
}

/* ===== 欢迎屏幕样式 ===== */

.screen-welcome {
    /* 欢迎屏幕容器 */
}

.screen-welcome #welcome-container {
    width: 100%;
    height: 100%;
    align: center middle;
    content-align: center middle;
}

.screen-welcome #welcome-title {
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.screen-welcome #welcome-subtitle {
    text-align: center;
    color: $accent;
    text-style: italic;
    margin-bottom: 1;
}

.screen-welcome #welcome-description {
    text-align: center;
    color: $text-muted;
    margin-bottom: 2;
}

.screen-welcome #features-container {
    width: 100%;
    margin: 2 2 2 2;
    border: round $primary;
    padding: 1;
    align: center middle;
}

.screen-welcome #welcome-buttons {
    layout: horizontal;
    align: center middle;
    margin-bottom: 2;
}

.screen-welcome #welcome-buttons Button {
    margin: 0 1;
    min-width: 8;
}

/* ===== 书架屏幕样式 ===== */

.screen-bookshelf {
    /* 书架屏幕容器 */
}

.screen-bookshelf Grid {
    width: 100%;
    height: 100%;
    grid-size: 1 3;
    grid-rows: 2fr 12fr 1fr 1fr;
}

.screen-bookshelf DataTable {
    width: 100%;
    height: 80;
}

.screen-bookshelf #bookshelf-title {
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.screen-bookshelf #bookshelf-toolbar {
    layout: horizontal;
    align: center middle;
    margin: 1 0;
}

.screen-bookshelf #bookshelf-toolbar Button {
    margin: 0 1;
    min-width: 8;
}

.screen-bookshelf #shortcuts-bar {
    width: 100%;
    height: auto;
    min-height: 3;
    dock: bottom;
    layout: horizontal;
    align-horizontal: center;
    content-align: center middle;
}

.screen-bookshelf #shortcuts-bar Label {
    margin: 0 2;
    text-style: italic;
    color: $text-muted;
}

/* ===== 阅读器屏幕样式 ===== */

.screen-reader {
    /* 阅读器屏幕容器 */
}

.screen-reader #header {
    dock: top;
    height: 3;
    background: $accent;
    color: $text;
    text-align: center;
    content-align: center middle;
}

.screen-reader #content {
    width: 100%;
    height: 100%;
    margin: 1;
    padding: 1;
    border: round $primary;
    background: $surface;
    color: $text;
}

.screen-reader #buttons {
    dock: bottom;
    height: auto;
    min-height: 3;
    layout: horizontal;
    align: center middle;
    background: $panel;
}

.screen-reader #buttons Button {
    margin: 0 1;
    min-width: 8;
    background: $primary;
    color: $text;
}

.screen-reader #buttons Button:hover {
    background: $primary-lighten-1;
}

.screen-reader #status {
    dock: bottom;
    height: 1;
    background: $panel;
    color: $text-muted;
    text-align: center;
    content-align: center middle;
}

/* ===== 设置屏幕样式 ===== */

.screen-settings {
    /* 设置屏幕容器 */
}

.screen-settings TabbedContent {
    width: 100%;
    height: 100%;
}

.screen-settings TabPane {
    width: 100%;
    height: 100%;
    padding: 1;
}

.screen-settings .settings-group {
    margin: 1 0;
    padding: 1;
    border: round $secondary;
}

.screen-settings .settings-group-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.screen-settings .setting-item {
    margin: 1 0;
    layout: horizontal;
    align: left middle;
}

.screen-settings .setting-label {
    width: 30%;
    text-align: right;
    margin-right: 2;
}

.screen-settings .setting-control {
    width: 70%;
}

/* ===== 文件资源管理器屏幕样式 ===== */

.screen-fileexplorer {
    /* 文件资源管理器屏幕容器 */
}

.screen-fileexplorer DirectoryTree {
    width: 100%;
    height: 100%;
}

.screen-fileexplorer .file-item {
    padding: 0 1;
    margin: 0;
}

.screen-fileexplorer .file-item:hover {
    background: $accent;
    color: $text;
}

/* ===== 统计屏幕样式 ===== */

.screen-statistics {
    /* 统计屏幕容器 */
}

.screen-statistics .stats-container {
    width: 100%;
    height: 100%;
    padding: 1;
}

.screen-statistics .stats-section {
    margin: 2 0;
    padding: 1;
    border: round $secondary;
}

.screen-statistics .stats-title {
    text-style: bold;
    color: $primary;
    text-align: center;
    margin-bottom: 1;
}

.screen-statistics .stats-item {
    margin: 1 0;
    layout: horizontal;
    align: left middle;
}

.screen-statistics .stats-label {
    width: 50%;
    text-align: left;
}

.screen-statistics .stats-value {
    width: 50%;
    text-align: right;
    text-style: bold;
    color: $accent;
}

/* ===== 对话框样式 ===== */

Dialog {
    width: auto;
    height: auto;
    background: $panel;
    border: round $primary;
    padding: 1;
}

Dialog .dialog-title {
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

Dialog .dialog-content {
    width: 100%;
    margin: 1 0;
}

Dialog .dialog-buttons {
    width: 100%;
    layout: horizontal;
    align-horizontal: center;
    margin-top: 1;
}

Dialog .dialog-buttons Button {
    margin: 0 1;
    min-width: 8;
}

/* ===== 防止样式泄漏 ===== */

/* 重置可能冲突的全局样式 */
.isolated-screen {
    position: relative;
    top: auto;
    left: auto;
    right: auto;
    bottom: auto;
    transform: none;
    z-index: auto;
    overflow: visible;
}

/* 屏幕切换过渡效果 */
.isolated-screen {
    transition: opacity 0.2s ease-in-out;
}

/* 隐藏非活动屏幕 */
.isolated-screen:not(.active) {
    display: none;
}

/* 显示活动屏幕 */
.isolated-screen.active {
    display: block;
    opacity: 1;
}