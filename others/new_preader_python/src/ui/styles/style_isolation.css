/*
样式隔离CSS文件 - 完整实现
为每个屏幕创建独立的样式命名空间，彻底防止样式污染
*/

/* ===== 基础样式隔离规则 ===== */

/* 确保每个屏幕的样式完全隔离 */
.screen-welcome,
.screen-bookshelf,
.screen-reader,
.screen-settings,
.screen-fileexplorer,
.screen-statistics,
.screen-help,
.screen-bosskey,
.screen-getbooks,
.screen-proxysettings,
.screen-novelsitesmanagement,
.screen-crawlermanagement {
    /* 重置所有可能影响其他屏幕的样式 */
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: none;
    background: transparent;
}

/* 强制隔离：确保每个屏幕的样式不会泄漏到其他屏幕 */
.screen-welcome *,
.screen-bookshelf *,
.screen-reader *,
.screen-settings *,
.screen-fileexplorer *,
.screen-statistics *,
.screen-help *,
.screen-bosskey *,
.screen-getbooks *,
.screen-proxysettings *,
.screen-novelsitesmanagement *,
.screen-crawlermanagement * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* ===== 欢迎屏幕样式隔离 ===== */
.screen-welcome {
    /* 欢迎屏幕特定的样式规则 */
    background: var(--background);
}

.screen-welcome #welcome-container {
    width: 100%;
    height: 100%;
    align: center middle;
}

.screen-welcome #welcome-title {
    text-align: center;
    text-style: bold;
    color: var(--primary);
}

.screen-welcome #welcome-buttons Button {
    margin: 0 1;
    min-width: 8;
}

/* ===== 书架屏幕样式隔离 ===== */
.screen-bookshelf {
    /* 书架屏幕特定的样式规则 */
    background: var(--background);
}

.screen-bookshelf .book-item {
    /* 书架屏幕书籍项的样式 */
    background: var(--surface);
    border: round var(--primary);
    margin: 1;
}

.screen-bookshelf .book-list {
    /* 书架屏幕书籍列表的样式 */
    width: 100%;
    height: 100%;
}

/* ===== 阅读器屏幕样式隔离 ===== */
.screen-reader {
    /* 阅读器屏幕特定的样式规则 */
    background: var(--background);
    layout: vertical;
}

.screen-reader #header {
    width: 100%;
    height: 1;
    dock: top;
    background: var(--primary);
    color: white;
    content-align: center middle;
    text-style: bold;
}

.screen-reader #content {
    width: 100%;
    height: 1fr;
    background: var(--background);
    color: var(--text);
    padding: 0;
    margin: 0;
    border: none;
}

.screen-reader #status {
    width: 100%;
    height: 1;
    background: var(--accent);
    color: white;
    content-align: center middle;
    text-style: bold;
}

.screen-reader #buttons {
    width: 100%;
    height: 1;
    dock: bottom;
    background: var(--surface);
    layout: horizontal;
    align: center middle;
}

.screen-reader .btn {
    width: 8;
    height: 1;
    margin: 0 1;
    background: var(--primary);
    color: white;
    border: none;
}

.screen-reader .btn:hover {
    background: var(--primary-lighten-1);
}

.screen-reader .btn:focus {
    background: var(--primary-darken-1);
}

/* ===== 设置屏幕样式隔离 ===== */
.screen-settings {
    /* 设置屏幕特定的样式规则 */
    background: var(--background);
}

.screen-settings .settings-tab {
    /* 设置标签页的样式 */
    background: var(--surface);
    border: round var(--primary);
}

.screen-settings .settings-control {
    /* 设置控件的样式 */
    width: 100%;
    margin: 1 0;
}

/* ===== 文件资源管理器屏幕样式隔离 ===== */
.screen-fileexplorer {
    /* 文件资源管理器屏幕特定的样式规则 */
    background: var(--background);
}

.screen-fileexplorer .file-tree {
    /* 文件树的样式 */
    width: 100%;
    height: 100%;
}

.screen-fileexplorer .file-item {
    /* 文件项的样式 */
    background: var(--surface);
    margin: 1;
}

/* ===== 其他屏幕样式隔离 ===== */
.screen-statistics {
    background: var(--background);
}

.screen-help {
    background: var(--background);
}

.screen-bosskey {
    background: var(--background);
}

.screen-getbooks {
    background: var(--background);
}

.screen-proxysettings {
    background: var(--background);
}

.screen-novelsitesmanagement {
    background: var(--background);
}

.screen-crawlermanagement {
    background: var(--background);
}

/* ===== 强制隔离规则 ===== */

/* 确保非活动屏幕完全隐藏 */
.screen-welcome:not(.active),
.screen-bookshelf:not(.active),
.screen-reader:not(.active),
.screen-settings:not(.active),
.screen-fileexplorer:not(.active),
.screen-statistics:not(.active),
.screen-help:not(.active),
.screen-bosskey:not(.active),
.screen-getbooks:not(.active),
.screen-proxysettings:not(.active),
.screen-novelsitesmanagement:not(.active),
.screen-crawlermanagement:not(.active) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* 活动屏幕的样式 */
.screen-welcome.active,
.screen-bookshelf.active,
.screen-reader.active,
.screen-settings.active,
.screen-fileexplorer.active,
.screen-statistics.active,
.screen-help.active,
.screen-bosskey.active,
.screen-getbooks.active,
.screen-proxysettings.active,
.screen-novelsitesmanagement.active,
.screen-crawlermanagement.active {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: all !important;
}

/* 屏幕切换动画 */
.screen-welcome,
.screen-bookshelf,
.screen-reader,
.screen-settings,
.screen-fileexplorer,
.screen-statistics,
.screen-help,
.screen-bosskey,
.screen-getbooks,
.screen-proxysettings,
.screen-novelsitesmanagement,
.screen-crawlermanagement {
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}

/* 防止样式继承污染 */
.screen-welcome *:not(.screen-welcome),
.screen-bookshelf *:not(.screen-bookshelf),
.screen-reader *:not(.screen-reader),
.screen-settings *:not(.screen-settings),
.screen-fileexplorer *:not(.screen-fileexplorer),
.screen-statistics *:not(.screen-statistics),
.screen-help *:not(.screen-help),
.screen-bosskey *:not(.screen-bosskey),
.screen-getbooks *:not(.screen-getbooks),
.screen-proxysettings *:not(.screen-proxysettings),
.screen-novelsitesmanagement *:not(.screen-novelsitesmanagement),
.screen-crawlermanagement *:not(.screen-crawlermanagement) {
    /* 重置所有可能继承的样式 */
    all: unset;
}